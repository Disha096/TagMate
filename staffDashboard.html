<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff Dashboard - TagMate</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app active">
        <div class="navbar staff">
            <h1>Staff Portal</h1>
            <div class="user-info">
                <span id="staffName"></span>
                <button class="btn-logout" id="logoutStaff">Logout</button>
            </div>
        </div>
        <div class="container">
            <div class="bag-table" id="staffBagTable"></div>
        </div>
    </div>

    <script>
        let bags = [
            { id: "BG101", status: "Checked-in", location: "Airport A" },
            { id: "BG102", status: "Loaded", location: "Flight 101" },
            { id: "BG103", status: "In-Transit", location: "Transit Hub" }
        ];

        const user = JSON.parse(localStorage.getItem('currentUser'));
        if (!user || user.type !== 'staff') { window.location.href = 'selection.html'; }
        document.getElementById('staffName').textContent = 'Staff ID: ' + user.name;

        function renderStaffTable() {
            const container = document.getElementById('staffBagTable');
            container.innerHTML = `<table>
        <thead><tr><th>ID</th><th>Status</th><th>Location</th><th>Actions</th></tr></thead>
        <tbody>${bags.map(b => `<tr>
            <td>${b.id}</td>
            <td>${b.status}</td>
            <td>${b.location}</td>
            <td>
                <button class="btn-preview" data-id="${b.id}">Preview</button>
                <button class="btn-delete" data-id="${b.id}">Delete</button>
            </td>
        </tr>`).join('')}</tbody>
    </table>`;

            container.querySelectorAll('.btn-delete').forEach(btn => {
                btn.addEventListener('click', e => {
                    const id = e.target.dataset.id;
                    bags = bags.filter(b => b.id !== id);
                    renderStaffTable();
                });
            });
            container.querySelectorAll('.btn-preview').forEach(btn => {
                btn.addEventListener('click', e => {
                    alert('Previewing baggage ' + e.target.dataset.id);
                });
            });
        }
        renderStaffTable();

        document.getElementById('logoutStaff').addEventListener('click', () => {
            localStorage.removeItem('currentUser');
            window.location.href = 'selection.html';
        });
    </script>
</body>

</html>